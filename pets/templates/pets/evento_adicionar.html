{% load static %}
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'pets/style.css' %}">
    <title>{% if evento %}Editar Evento{% else %}Adicionar Evento{% endif %}</title>
</head>
<body>
    <main class="form-container">
        <h1>{% if evento %}EDITAR EVENTO{% else %}ADICIONAR EVENTO{% endif %}</h1>
        <h2 style="font-size: 1.2rem; color: #555; margin-top: -20px; margin-bottom: 30px;">para {{ pet.nome }}</h2>

        {% if messages %}
            <div class="messages">
                {% for message in messages %}
                    <div class="message {{ message.tags }}">{{ message }}</div>
                {% endfor %}
            </div>
        {% endif %}

        <form method="post">
            {% csrf_token %}
            <div class="manual-form">
                <p>
                    <label for="id_tipo">Tipo de Evento:</label>
                    <select name="tipo" id="id_tipo" required>
                        <option value="">--- Selecione ---</option>
                        {% for value, display_text in tipos_evento %}
                            {% if values.tipo == value %}
                                <option value="{{ value }}" selected>{{ display_text }}</option>
                            {% elif not values.tipo and evento and evento.tipo == value %}
                                <option value="{{ value }}" selected>{{ display_text }}</option>
                            {% else %}
                                <option value="{{ value }}">{{ display_text }}</option>
                            {% endif %}
                        {% endfor %}
                    </select>
                </p>

                <p>
                    <label for="id_data">Data do Evento:</label>
                    {% if values.data %}
                        <input type="date" name="data" id="id_data" value="{{ values.data }}" required>
                    {% elif evento and evento.data %}
                        <input type="date" name="data" id="id_data" value="{{ evento.data|date:'Y-m-d' }}" required>
                    {% else %}
                        <input type="date" name="data" id="id_data" value="" required>
                    {% endif %}
                </p>

                <p>
                    <label for="id_observacoes">Observações (opcional):</label>
                    <textarea name="observacoes" id="id_observacoes" rows="4">
{% if values.observacoes %}{{ values.observacoes }}{% elif evento and evento.observacoes %}{{ evento.observacoes }}{% endif %}
                    </textarea>
                </p>
            </div>

            <button type="submit">{% if evento %}Salvar Alterações{% else %}Adicionar{% endif %}</button>
        </form>

        <a class="back-link" href="{% url 'evento_list' pet.pk %}">Voltar</a>
    </main>
</body>
</html>
